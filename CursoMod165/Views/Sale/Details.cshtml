@model IEnumerable<CursoMod165.Models.ProductList> 
@* @model CursoMod165.Models.Sale *@

<h1>Details</h1>

<h4>Order</h4>

<hr />

<p>
    <!-- Usar interncionalizacao -->
    <!--  a proxima linha faz uma acção; cria a opcao de criar um novo customer   -->
    @* <a class="btn btn-outline-primary" asp-action="Create">@SharedLocalizer["Create New"]</a> *@

    <a class="btn btn-outline-primary" asp-action="AddProductToOrder" asp-route-id="@ViewBag.SaleID">Add Product To Order</a>  <!-- Add Product To Order</a> -->
    <a class="btn btn-outline-primary" asp-action="AddProductToOrder" asp-route-id="@ViewBag.SaleID">Order Process</a>  <!-- Add Product To Order</a> -->
    <a class="btn btn-outline-primary" asp-action="AddProductToOrder" asp-route-id="@ViewBag.SaleID">Sent Order</a>  <!-- Add Product To Order</a> -->


 
    
    <br />
    <h4 class="text-danger">Adicionar Index.Number para voltar a pagina Details,...ver o que se q...</h4>
    <h4 class="text-danger">Adicionar botão para processar, verifica existencia em armazem, e atualizar dados, colocar processado.....se nao existir passar produto a zero e coloca, quantidades em stock.</h4>
    <h4 class="text-danger">Colocar nas observacoes outofstck e actualizar info, colocar status processada... </h4>
    <h4 class="text-danger"> Ver o que fazer a partir do ponto: PAsso 2 - Processamento; envio de emails</h4>
    <h6 class="text-danger"> Adicionar coluna com total por linha de cada produto qtd x preco (não é obrigatorio) </h6>
    <h6 class="text-danger"> Preencher de forma simples observacoes e identificador; ja tenho mas nao esta claro </h6>
    <h6 class="text-danger"> Adicionar botao processamento, só pode ser primida se estiver no estado ordered </h6>
    <h6 class="text-danger"> Criar botao envio quando premido atualiza stock, envia email e passa para estado seguinte, botao fica inacessivel, o melhor era este botao ir mudando de nome </h6>
    <!-- Posso tentar passar valor usando uma celula invisivel... -->
    
</p>

<head>
    <style>
    table {
        border-collapse: collapse;
    }
    th,
    td {
        border: 1px solid #cecfd5;
        padding: 10px 15px;
    }
    </style>
</head>

<table>
  <thead>
    <tr>
      <th scope="col-100">Order Number :     </th>
      <th scope="col">Customer ID :      </th>
      <th scope="col">Customer Name :    </th>
      <th scope="col">Email              </th>
      <th scope ="col">Address : </th>
      <th scope="col">Status : </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>@ViewBag.NumVenda</td>
      <td>@ViewBag.ClienteID</td>
      <td>@ViewBag.ClienteName</td>
      <td>@ViewBag.Email</td>
      <td>@ViewBag.Address @ViewBag.Zipcode @ViewBag.City #@ViewBag.SaleID</td>
      <td>@ViewBag.Status</td>      
    </tr>
  </tbody>
</table>

<br />

<table>
  <tr>
        <th scope="col">Observations : </th>
  </tr>
  <tr>
        <td>@ViewBag.Obs</td>
  </tr>
</table>

<br />



<!-- <p>(c) ViewBag.Nome</p> -->
<!--(c) ViewBag.Obs -->


<!-- ????????????????????????????????????? -->
<!--Falta create NEW -->
<p>
    <!--  a proxima linha faz uma acção; cria a opcao de criar um novo customer   -->
    <!--  Posso enviar talvez o CodVenda aqui :-->
    <!-- <a class="btn btn-outline-warning" asp-action="Edit" asp-route-id="(c)productList.ID">Edit</a> -->
    <a class="btn btn-outline-primary" asp-action="OrderList"> Add Product To List</a>  <!-- @ViewBag.NumVenda -->
    <a class="btn btn-outline-secondary" asp-action="AddProductToList"> + </a>
    <br />
</p>


<!-- Aqui é a tabela do da lista de produtos da venda  -->
<!-- Apresento 1º cabecalho e de seguinda num ciclo for o conteudo linha a linha da base de dados -->


<!-- Passar valores com script: -->
<!-- 1 -->
@{
    ViewBag.MyData = "Ziggy, Rafiq Blog Post";
}
<input type="hidden" id="my-data" value="@ViewBag.MyData" />
<script>
    var myData = document.getElementById("my-data").value;
    console.log(myData); // Output: "Ziggy, Rafiq Blog Post"
</script>
<!-- 1 -->

<!-- 2 -->
@{
    ViewData["MyData"] = new { Name = "Lerzan", Age = 28 };
}
<script>
    var myData = @Html.Raw(Json.Serialize(ViewData["MyData"]));
    console.log(myData.Name); // Output: "Lerzan"
    console.log(myData.Age); // Output: 28
</script>

<!-- 2 -->


<table class="table">
    <thead>
        <tr>

            <th>
                <!--   está só =  Descricao    -->
                @Html.DisplayNameFor(model => model.ID)

            </th>
            <!-- Codigo da unidade th ou td bold ou nao-->
            <th>
                <!-- Nome do produto dentro da category -->
                @Html.DisplayNameFor(model => model.Sale.CodVenda)
            </th>
            <th>
                <!--  Preço  -->
                @Html.DisplayNameFor(model => model.Price)
            </th>
            <th>
                <!--  Quantidade -->
                @Html.DisplayNameFor(model => model.Quantity)
            </th>
            <th>
                <!--  Nome  -->
                @Html.DisplayNameFor(model => model.Product.Description)  <!--  Testar product.description / Quantity-->
            </th>
                




            @*
            <th>
                <!--  Nome na tabela category  -->
                @Html.DisplayNameFor(model => model.Product.Name)
            </th> *@

            <th>
                <!-- Aqui vamos criar novos botoes na tabela: apagar, modificar etc  -->
                <!-- o que é isto ??? -->
                <!-- titulo da tab para as accoes possiveis na tabela -->
                Actions
            </th>
        </tr>
    </thead>
    
    <!-- Apresenta dados que estao na base de dados -->
    <!-- se a tabela estiver vazia apresenta informacao que esta vazia -->
    <tbody> 
        @if (!Model.Any())
        {
            <tr>No Data (Carrinho de compras vazio - Adicione Produto) </tr>
            
        } 
        <!-- para cada elemento do staff apresenta os seguintes campos -->
        <!-- Os campos tem de coincidir com os de cima -->
        @foreach (var productList in Model)
        {
        <tr>


            <td>
                <!-- arroba description.Name -->
                @Html.DisplayFor(modelItem => productList.ID)
            </td>

                <!-- Codigo da unidade -->
                <td>
                    <!-- Nome do produto dentro da category -->
                    @Html.DisplayFor(modelItem => productList.Sale.CodVenda)
                </td>

            <td>
                    <!-- arroba price -->
                 @Html.DisplayFor(modelItem => productList.Price)
            </td>
             <td>
                    <!-- arroba price -->
                 @Html.DisplayFor(modelItem => productList.Quantity)
            </td>
                
            <td>
                    <!-- arroba quantity -->
                    @Html.DisplayFor(modelItem => productList.Product.Description)
            </td>




            @*
            <td>
                    <!-- Nome do produto dentro da category -->
                    @Html.DisplayFor(modelItem => productList.Product.Name)
            </td>
              *@
              
                <td>
                <!--  td é uma celula ou coluna na pagina html -->
                    @*<a class="btn btn-outline-success" asp-action="Details" asp-route-id="@product.ID">Details</a>*@
                <a class="btn btn-outline-warning" asp-action="Edit" asp-route-id="@productList.ID">Edit</a>
                <a class="btn btn-outline-danger" asp-action="Delete" asp-route-id="@productList.ID">Delete</a>

            </td>
        </tr>
        }

       
        <table>
        
            <tr>
                
                <th scope ="col" style="background-color:cornflowerblue">                         </th> <!-- <th scope="col"> -->
                <th width="330" style="background-color:cornflowerblue" align="right">  </th>
            </tr>
            <tr>
                <td><b>Total Value :</b></td>
                <td align="right">@ViewBag.Totals</td>   <!-- (c)Int32.Parse(@ViewBag.Totals) // .toFixed(2) -->
            </tr>
        </table>
        
    </tbody>
    
    
</table>